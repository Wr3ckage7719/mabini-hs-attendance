/* ========================================
   TEACHER MOBILE ENHANCEMENTS
   Separate from admin - teacher-specific responsive styles
   Higher specificity to override admin-theme.css
   ======================================== */

/* Ensure proper viewport handling */
html, body {
    overflow-x: hidden !important;
    width: 100% !important;
    max-width: 100% !important;
}

/* Mobile-specific box sizing */
@media (max-width: 767px) {
    * {
        box-sizing: border-box !important;
    }
}

/* ========================================
   HEADER ICON ARRANGEMENT (Like Image 2)
   Mobile: 360-430px - Icons only in horizontal layout
   ======================================== */
@media (max-width: 430px) {
    /* Header container */
    .admin-top,
    header.admin-top {
        display: flex !important;
        align-items: center !important;
        justify-content: space-between !important;
        padding: 12px 16px !important;
        min-height: 64px !important;
    }
    
    .admin-top-actions {
        display: flex !important;
        flex-direction: row !important;
        align-items: center !important;
        justify-content: flex-end !important;
        gap: 8px !important;
        flex-wrap: nowrap !important;
        margin-left: auto !important;
        height: 44px !important;
    }
    
    /* Hide the flex container with avatar and logout */
    .admin-top-actions > div {
        display: contents !important;
    }
    
    /* Hide theme toggle on mobile */
    .theme-toggle,
    #themeToggle {
        display: none !important;
    }
    
    /* Hide avatar on mobile */
    .avatar {
        display: none !important;
    }
    
    /* Logout button - icon only with red color */
    #logoutBtn,
    button[id="logoutBtn"] {
        min-width: 44px !important;
        min-height: 44px !important;
        width: 44px !important;
        height: 44px !important;
        display: inline-flex !important;
        align-items: center !important;
        justify-content: center !important;
        padding: 10px !important;
        border-radius: 8px !important;
        background: transparent !important;
        border: none !important;
        color: #ef4444 !important; /* Red color */
        font-size: 0 !important; /* Hide text */
        flex-shrink: 0 !important;
        position: relative !important;
        vertical-align: middle !important;
        margin: 0 !important;
    }
    
    /* Add logout icon */
    #logoutBtn::before,
    button[id="logoutBtn"]::before {
        content: '';
        display: block !important;
        width: 20px !important;
        height: 20px !important;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23ef4444' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4'/%3E%3Cpolyline points='16 17 21 12 16 7'/%3E%3Cline x1='21' y1='12' x2='9' y2='12'/%3E%3C/svg%3E") !important;
        background-size: contain !important;
        background-repeat: no-repeat !important;
        background-position: center !important;
        font-size: 20px !important;
    }
    
    /* Dark mode logout icon */
    [data-theme="dark"] #logoutBtn::before,
    [data-theme="dark"] button[id="logoutBtn"]::before {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23f87171' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4'/%3E%3Cpolyline points='16 17 21 12 16 7'/%3E%3Cline x1='21' y1='12' x2='9' y2='12'/%3E%3C/svg%3E") !important;
    }
    
    /* Hover effect for logout button */
    #logoutBtn:hover,
    button[id="logoutBtn"]:hover {
        background: rgba(239, 68, 68, 0.1) !important;
    }
    
    /* Active state */
    #logoutBtn:active,
    button[id="logoutBtn"]:active {
        background: rgba(239, 68, 68, 0.2) !important;
        transform: scale(0.95) !important;
    }
}

/* ========================================
   MOBILE TABLE FIXES (Max 767px)
   ======================================== */
@media (max-width: 767px) {
    
    /* Container adjustments for mobile */
    .admin-main,
    .main-content,
    .content-area {
        padding: 12px 8px !important;
        margin: 0 !important;
        width: 100% !important;
        max-width: 100% !important;
    }
    
    .container-fluid {
        padding: 0 12px !important;
        width: 100% !important;
        max-width: 100% !important;
    }
    
    /* Card spacing */
    .card {
        margin: 0 0 16px 0 !important;
        border-radius: 8px !important;
        width: 100% !important;
        box-sizing: border-box !important;
    }
    
    .card-body {
        padding: 16px 12px !important;
    }
    
    .card-header {
        padding: 12px !important;
    }
    
    /* ========================================
       TABLE RESPONSIVE WRAPPER
       ======================================== */
    
    .table-responsive {
        display: block !important;
        width: 100% !important;
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch !important;
        margin: 0 !important;
        padding: 0 !important;
        position: relative;
        border-radius: 8px;
        box-sizing: border-box !important;
    }
    
    /* Ensure table doesn't break container - FIX FOR FITTING */
    .table-responsive table,
    .table-responsive .table {
        margin-bottom: 0 !important;
        width: 100% !important;
        max-width: 100% !important;
        overflow: hidden !important;
        box-sizing: border-box !important;
    }
    
    /* Tables must fit within container */
    table,
    .table {
        width: 100% !important;
        table-layout: auto !important;
        overflow: hidden !important;
        box-sizing: border-box !important;
        font-size: 13px !important;
    }
    
    /* Scroll indicator for user */
    .table-responsive::after {
        content: '← Swipe to see more →';
        position: absolute;
        bottom: -24px;
        left: 0;
        right: 0;
        text-align: center;
        font-size: 11px;
        color: var(--text-secondary, #6c757d);
        opacity: 0.7;
        pointer-events: none;
        padding: 4px 0;
    }
    
    /* Remove scroll indicator when scrolled */
    .table-responsive.scrolled::after {
        opacity: 0;
    }
    
    /* ========================================
       TABLE STYLING
       ======================================== */
    
    .table {
        font-size: 13px !important;
        margin-bottom: 24px !important;
        border-collapse: collapse !important;
        width: 100% !important;
        min-width: 100% !important;
    }
    
    .table thead th {
        position: sticky !important;
        top: 0 !important;
        background: var(--table-header-bg, #f8f9fa) !important;
        z-index: 10 !important;
        padding: 12px 10px !important;
        font-size: 12px !important;
        font-weight: 600 !important;
        white-space: nowrap !important;
        border-bottom: 2px solid var(--border-color, #dee2e6) !important;
    }
    
    .table tbody td {
        padding: 12px 10px !important;
        vertical-align: middle !important;
        white-space: nowrap !important;
        border-bottom: 1px solid var(--border-color, #dee2e6) !important;
    }
    
    /* First column sticky (for ID/Name) */
    .table thead th:first-child,
    .table tbody td:first-child {
        position: sticky !important;
        left: 0 !important;
        background: var(--table-bg, #ffffff) !important;
        z-index: 5 !important;
        box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1) !important;
    }
    
    /* Dark mode support for sticky column */
    [data-theme="dark"] .table thead th:first-child,
    [data-theme="dark"] .table tbody td:first-child {
        background: var(--table-bg, #1a1d20) !important;
        box-shadow: 2px 0 5px rgba(0, 0, 0, 0.3) !important;
    }
    
    /* Dark mode table headers */
    [data-theme="dark"] .table thead th {
        background: var(--table-header-bg, #212529) !important;
    }
    
    /* Striped rows - ensure sticky column matches */
    .table-striped tbody tr:nth-of-type(odd) td:first-child {
        background: var(--table-striped-bg, #f8f9fa) !important;
    }
    
    [data-theme="dark"] .table-striped tbody tr:nth-of-type(odd) td:first-child {
        background: var(--table-striped-bg, #212529) !important;
    }
    
    /* Hover effect */
    .table-hover tbody tr:hover td {
        background: var(--table-hover-bg, #f1f3f5) !important;
    }
    
    [data-theme="dark"] .table-hover tbody tr:hover td {
        background: var(--table-hover-bg, #2c3034) !important;
    }
    
    /* ========================================
       ACTION BUTTONS IN TABLES
       ======================================== */
    
    .table tbody td:last-child {
        min-width: 100px !important;
        text-align: center !important;
    }
    
    /* Compact button groups */
    .table .btn-group {
        display: flex !important;
        gap: 4px !important;
        flex-wrap: nowrap !important;
    }
    
    .table .btn {
        padding: 6px 10px !important;
        font-size: 13px !important;
        white-space: nowrap !important;
        min-width: auto !important;
    }
    
    .table .btn i {
        font-size: 14px !important;
    }
    
    .table .btn-sm {
        padding: 4px 8px !important;
        font-size: 12px !important;
    }
    
    /* ========================================
       SEARCH & FILTERS
       ======================================== */
    
    .search-filters {
        margin-bottom: 16px !important;
    }
    
    .search-filters .row {
        gap: 12px 0 !important;
    }
    
    .search-filters .form-control,
    .search-filters .form-select,
    .form-control,
    .form-select {
        min-height: 44px !important;
        font-size: 16px !important; /* Prevents iOS zoom */
        padding: 10px 12px !important;
        width: 100% !important;
        box-sizing: border-box !important;
    }
    
    /* ========================================
       BUTTONS - ADAPTIVE SIZING
       ======================================== */
    
    /* Primary action buttons - full width on mobile */
    .btn-primary,
    .btn-success,
    .btn-danger,
    .btn-warning,
    .btn-info {
        width: 100% !important;
        min-height: 44px !important;
        font-size: 16px !important;
        margin-bottom: 8px !important;
        box-sizing: border-box !important;
    }
    
    /* Secondary/outline buttons */
    .btn-outline-primary,
    .btn-outline-secondary,
    .btn-outline-success,
    .btn-outline-danger {
        min-height: 44px !important;
        font-size: 14px !important;
        padding: 10px 16px !important;
    }
    
    /* Button groups - horizontal scroll on mobile */
    .btn-group {
        display: flex !important;
        flex-wrap: nowrap !important;
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch !important;
        gap: 4px !important;
    }
    
    .btn-group .btn {
        flex: 0 0 auto !important;
        white-space: nowrap !important;
    }
    
    /* Button groups - stack vertically for primary actions */
    .btn-group-vertical,
    .action-buttons,
    .card-footer .btn-group {
        display: flex !important;
        flex-direction: column !important;
        gap: 8px !important;
        width: 100% !important;
    }
    
    .btn-group-vertical .btn,
    .action-buttons .btn {
        width: 100% !important;
    }
    
    /* Icon-only buttons maintain square shape */
    .btn-icon,
    .btn[class*="icon-"],
    button[aria-label]:not([class*="btn-primary"]):not([class*="btn-success"]) {
        min-width: 44px !important;
        min-height: 44px !important;
        padding: 0.5rem !important;
        width: auto !important;
    }
    
    /* ========================================
       STAT CARDS
       ======================================== */
    
    .stats-grid,
    .stat-cards,
    .dashboard-stats {
        display: grid !important;
        grid-template-columns: 1fr !important;
        gap: 12px !important;
        width: 100% !important;
        margin-bottom: 20px !important;
    }
    
    .stat-card,
    .stat-card.primary,
    .stat-card.success,
    .stat-card.warning,
    .stat-card.secondary,
    .stat-card.info,
    .stat-card.danger {
        width: 100% !important;
        max-width: 100% !important;
        margin: 0 !important;
        box-sizing: border-box !important;
        overflow: hidden !important;
        padding: 16px !important;
        border-radius: 8px !important;
        background: var(--card-bg, #ffffff) !important;
        border: 1px solid var(--border-color, #dee2e6) !important;
    }
    
    /* Dark mode stat cards */
    [data-theme="dark"] .stat-card {
        background: var(--card-bg, #1a1d20) !important;
        border-color: var(--border-color, #374151) !important;
    }
    
    .stat-card h3,
    .stat-card .stat-value {
        font-size: 28px !important;
        margin-bottom: 8px !important;
    }
    
    .stat-card p,
    .stat-card .stat-label {
        font-size: 13px !important;
    }
    
    .stat-header {
        display: flex !important;
        justify-content: space-between !important;
        align-items: flex-start !important;
        margin-bottom: 8px !important;
    }
    
    .stat-icon {
        font-size: 32px !important;
        opacity: 0.3 !important;
    }
    
    /* Cards adapt without changing desktop design */
    .card,
    .card.mb-4 {
        width: 100% !important;
        max-width: 100% !important;
        margin: 0 0 16px 0 !important;
        box-sizing: border-box !important;
    }
    
    .card-body {
        padding: 16px 12px !important;
    }
    
    .card-title {
        font-size: 16px !important;
    }
    
    .stats-container {
        display: grid !important;
        grid-template-columns: 1fr !important;
        gap: 12px !important;
        margin-bottom: 20px !important;
    }
    
    /* ========================================
       QUICK ACTIONS
       ======================================== */
    
    .quick-actions {
        display: block !important;
        width: 100% !important;
        margin-bottom: 20px !important;
    }
    
    /* Section header - title on top */
    .quick-actions .section-header {
        margin-bottom: 16px !important;
        width: 100% !important;
    }
    
    .quick-actions .section-title {
        font-size: 18px !important;
        font-weight: 600 !important;
        margin: 0 0 4px 0 !important;
        color: var(--text, #0f1724) !important;
    }
    
    /* Actions grid - 2x2 layout */
    .actions-grid {
        display: grid !important;
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 12px !important;
        width: 100% !important;
    }
    
    /* Action cards */
    .action-card,
    .quick-action-card {
        padding: 16px 12px !important;
        text-align: center !important;
        border-radius: 8px !important;
        background: var(--card-bg, #ffffff) !important;
        border: 1px solid var(--border-color, #dee2e6) !important;
        transition: transform 0.2s, box-shadow 0.2s !important;
        cursor: pointer !important;
        text-decoration: none !important;
        display: flex !important;
        flex-direction: column !important;
        align-items: center !important;
        justify-content: center !important;
        min-height: 120px !important;
    }
    
    /* Dark mode action cards */
    [data-theme="dark"] .action-card,
    [data-theme="dark"] .quick-action-card {
        background: var(--card-bg, #1a1d20) !important;
        border-color: var(--border-color, #374151) !important;
    }
    
    .action-card:active,
    .quick-action-card:active {
        transform: scale(0.95) !important;
    }
    
    .action-card:hover,
    .quick-action-card:hover {
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
        text-decoration: none !important;
    }
    
    .action-icon,
    .quick-action-card i {
        font-size: 32px !important;
        margin-bottom: 8px !important;
        display: block !important;
        color: var(--accent, #3b82f6) !important;
    }
    
    .action-title,
    .quick-action-card h6 {
        font-size: 14px !important;
        font-weight: 600 !important;
        margin-bottom: 4px !important;
        color: var(--text, #0f1724) !important;
    }
    
    .action-desc,
    .quick-action-card p {
        font-size: 11px !important;
        margin-bottom: 0 !important;
        opacity: 0.7 !important;
        color: var(--text-secondary, #6c757d) !important;
    }
    
    /* Dark mode text colors */
    [data-theme="dark"] .action-title,
    [data-theme="dark"] .quick-action-card h6 {
        color: var(--text, #e6eef8) !important;
    }
    
    [data-theme="dark"] .action-desc,
    [data-theme="dark"] .quick-action-card p {
        color: var(--text-secondary, #9fb6d6) !important;
    }
    
    /* ========================================
       PAGE HEADER
       ======================================== */
    
    .page-header {
        margin-bottom: 20px;
        padding: 0 4px;
    }
    
    .page-header h1,
    .page-header h2 {
        font-size: 24px;
        margin-bottom: 8px;
    }
    
    .page-header .breadcrumb {
        font-size: 12px;
        padding: 8px 0;
        background: transparent;
    }
    
    /* ========================================
       EMPTY STATES
       ======================================== */
    
    .empty-state {
        text-align: center;
        padding: 40px 20px;
    }
    
    .empty-state i {
        font-size: 48px;
        opacity: 0.3;
        margin-bottom: 16px;
        display: block;
    }
    
    .empty-state p {
        font-size: 14px;
        color: var(--text-secondary, #6c757d);
    }
    
    /* ========================================
       LOADING STATES
       ======================================== */
    
    .loading-skeleton {
        background: linear-gradient(
            90deg,
            var(--skeleton-base, #f0f0f0) 25%,
            var(--skeleton-highlight, #e0e0e0) 50%,
            var(--skeleton-base, #f0f0f0) 75%
        );
        background-size: 200% 100%;
        animation: loading 1.5s infinite;
        border-radius: 4px;
    }
    
    @keyframes loading {
        0% { background-position: 200% 0; }
        100% { background-position: -200% 0; }
    }
}

/* ========================================
   TABLET ADJUSTMENTS (768px - 1023px)
   ======================================== */
@media (min-width: 768px) and (max-width: 1023px) {
    
    .table-responsive {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }
    
    .table {
        font-size: 14px;
    }
    
    .table thead th,
    .table tbody td {
        padding: 12px 14px;
    }
    
    .quick-actions {
        grid-template-columns: repeat(3, 1fr);
    }
}

/* ========================================
   LANDSCAPE MOBILE (Max 767px height)
   ======================================== */
@media (max-width: 767px) and (orientation: landscape) {
    
    .page-header h1,
    .page-header h2 {
        font-size: 20px;
    }
    
    .stat-card h3 {
        font-size: 24px;
    }
    
    .card-body {
        padding: 12px !important;
    }
}

/* ========================================
   TOUCH OPTIMIZATIONS
   ======================================== */
@media (hover: none) and (pointer: coarse) {
    
    /* Larger touch targets */
    .btn,
    .form-control,
    .form-select,
    a.nav-link {
        min-height: 44px !important;
    }
    
    /* Remove hover states on touch devices */
    .table-hover tbody tr:hover td {
        background: inherit !important;
    }
    
    /* Add active states instead */
    .table tbody tr:active td {
        background: var(--table-hover-bg, #f1f3f5) !important;
    }
}

/* ========================================
   SPECIFIC FIX FOR 360-430px DEVICES
   Maximum Specificity Override
   ======================================== */
@media (min-width: 360px) and (max-width: 430px) {
    
    /* Force table responsive behavior */
    .table-responsive {
        width: 100% !important;
        overflow-x: auto !important;
    }
    
    .table-responsive table,
    .table-responsive .table,
    table.table,
    .table {
        width: 100% !important;
        max-width: 100% !important;
    }
    
    /* Force card stacking */
    .stats-grid,
    .stat-cards,
    .dashboard-stats,
    div[class*="stats"] {
        grid-template-columns: 1fr !important;
        display: grid !important;
    }
    
    /* Force button full width */
    .btn-primary,
    .btn-success,
    .btn-danger,
    .btn-warning,
    .btn-info,
    button[type="submit"],
    button[type="button"]:not(.btn-sm):not(.btn-icon) {
        width: 100% !important;
        max-width: 100% !important;
    }
    
    /* Force card full width */
    .card,
    .stat-card,
    div[class*="card"] {
        width: 100% !important;
        max-width: 100% !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
    }
    
    /* Force content area padding */
    .content-area,
    .admin-main,
    main {
        padding: 12px 8px !important;
    }
}

